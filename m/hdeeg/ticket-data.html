<section>
	<section style="background-color:#cccccc">
		<select id=filter1__ID>
			<option value="off" name=resolved>Open</option>
			<option value="" name=resolved>All</option>
			<option value="on" name=resolved>Closed</option>
		</select>
	
	</section>
    VmInclude:__COMPONENT__/g/grid.01.html
</section>
<script>
    function F__ID(){
        //-------------------------------------
        VmInclude:__COMPONENT__/g/grid.01.js
        //-------------------------------------
        var fields="ticket_type,Case Number|case_no,Equipment,other_equipment,serial_number,warranty,resolved,Comments";
        m.fields="_Form,"+fields+",Submit_date,Submitted_by,_Delete";
        //-------------------------------------
        m.cell_render=function(records,I,field,td){
            switch(field){
                case 'Colour':
                    td.html("<span style='color:"+records[I].Data[field]+"'><i class='far fa-circle'></i></span>");
                    td.css('text-align','center');
                    break;

				case 'warranty':
				case 'resolved':
					if (records[I].Data[field]=="on") {
					td.html("Yes");
						td.css('text-align', 'center');
					}
					if (records[I].Data[field]=="off"){
						td.html(" ");
					}
					// else {
					// 	td.html("");
					// }
					break;
				case 'ticket_type':
				if (records[I].Data[field] == "Equipment") {
					td.html("<div class='rectangle' style='padding:5px;border-radius:99px;height:30px;background-color:#65bb34;color:white;text-align:center'>"+records[I].Data[field]+"</div>")
				}
				if (records[I].Data[field] == "Pipelines") {
						td.html("<div class='rectangle' style='padding:5px;border-radius:99px;height:30px;background-color:#eb6b22;color:white;text-align:center'>" + records[I].Data[field] + "</div>")
					}
				if (records[I].Data[field] == "Software") {
						td.html("<div class='rectangle' style='padding:5px;border-radius:99px;height:30px;background-color:#56a3d5;color:white;text-align:center'>" + records[I].Data[field] + "</div>")
					}	
				break;

            }
        };
				// --------------------------------
			($('#filter1__ID').on('click', function () {
				var sc = $('#filter1__ID').val()
				var scd = ($('#F__ID input[name=resolved]')).val()
				scd = sc
				m.query = {
					"Data.resolved": scd
				}
				if ($('#filter1__ID').val() == "") {
					m.query = {
						$or: [{ "Data.resolved": "Yes" }, { "Data.resolved": "on" }, { "Data.resolved": "No" }, { "Data.resolved": "off" }]
					}
				}
				{ m.set_req(); m.request_data(); }
			}))

        //-------------------------------------
        //m.sort={'I1':-1};
    }
</script>
<style>
    VmInclude:__COMPONENT__/g/grid.01.css

		#filter1__ID{
		display:inline-block;
		margin-left:60px;
		height:30px;
		width:150px;
		border-radius:5px;
	}
</style>
