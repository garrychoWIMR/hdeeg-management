<div id=D__ID>
	<!--third html start -->
	<div class="container mt-95 mb-3">
		<div class="row">
			<!-- form container start -->
			<div class="col-12 col-lg-12 col-md-12 col-sm-12 mx-auto formbox">
				<div class="row">
					<div class="col-12">
						<!-- form start -->
								<form id="F__ID">
						<h3><span>Purchase order request form</span></h3>
					<div>
						<div class="form-group ">
							<div class="questiongroup ">
								<fieldset class="subquestions">
										<div><label><span class=""><h4>Full name of the requestor</h4></span></label></div>
									<div class="row">
										<div class="col-lg-6 col-sm-12">
											<div><label><span class="">Requestor's Name</span></label></div>
											<div class="input-group-sm ">
												<input type="text" id=Arrival_Time__ID name=Arrival_Time  >
											</div>
										</div>
										<div class="col-lg-6 col-sm-12">
											<div><label><span class="">Email of the requestor</span></label></div>
											<div class="input-group-sm ">
												<input type="text" id=Arrival_Time__ID name=Arrival_Time  >
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-lg-6 col-sm-12">
											<div><label><span class="">Supplier Name</span></label></div>
											<div class="input-group-sm ">
												<input type="text" id=Arrival_Time__ID name=Arrival_Time  >
											</div>
										</div>
										<div class="col-lg-6 col-sm-12">
											<div><label><span class="">Supplier Email</span></label></div>
											<div class="input-group-sm ">
												<input type="text" id=Arrival_Time__ID name=Arrival_Time  >
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-lg-6 col-sm-12">
											<div><label><span class="">Supplier Phone</span></label></div>
											<div class="input-group-sm ">
												<input type="text" id=Arrival_Time__ID name=Arrival_Time  >
											</div>
										</div>
										<div class="col-lg-6 col-sm-12">
											<div><label><span class="">Supplier Fax</span></label></div>
											<div class="input-group-sm ">
												<input type="text" id=Arrival_Time__ID name=Arrival_Time  >
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-lg-6 col-sm-12">
											<div><label><span class="">Supplier Account Number</span></label></div>
											<div class="input-group-sm ">
												<input type="text" id=Arrival_Time__ID name=Arrival_Time  >
											</div>
										</div>
										<div class="col-lg-6 col-sm-12">
											<div><label><span class="">Supplier Address</span></label></div>
											<div class="input-group-sm ">
												<input type="text" id=Arrival_Time__ID name=Arrival_Time  >
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-lg-6 col-sm-12">
											<div><label><span class="">Manager Name</span></label></div>
											<div class="input-group-sm ">
												<input type="text" id=Arrival_Time__ID name=Arrival_Time  >
											</div>
										</div>
										<div class="col-lg-6 col-sm-12">
											<div><label><span class="">Manager Email</span></label></div>
											<div class="input-group-sm ">
												<input type="text" id=Arrival_Time__ID name=Arrival_Time  >
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-lg-6 col-sm-12">
											<div><label><span class="">Department</span></label></div>
											<div class="input-group-sm ">
												<input type="text" id=Arrival_Time__ID name=Arrival_Time  >
											</div>
										</div>
										<div class="col-lg-6 col-sm-12">
											<div><label><span class="">Project Code</span></label></div>
											<div class="input-group-sm ">
												<input type="text" id=Arrival_Time__ID name=Arrival_Time  >
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-lg-6 col-sm-12">
											<div><label><span class="">Delivery Address</span></label></div>
											<div class="input-group-sm ">
												<input type="text" id=Arrival_Time__ID name=Arrival_Time  >
											</div>
										</div>
										<div class="col-lg-6 col-sm-12">
											<div><label><span class="">Project Code</span></label></div>
											<div class="input-group-sm ">
												<input type="text" id=Arrival_Time__ID name=Arrival_Time  >
											</div>
										</div>
									</div>
							<hr style="border-top: 1px solid #888;width: 100%;margin:10px 0">
							
								<div class="row">
									<div class="col-lg-6 col-sm-12">
									<u class=c_print style='cursor:pointer;margin-bottom:3px;display:inline-block' id=item_a_add__ID><i
											class="fa fa-plus"></i> Add an item</u>
									<table id=grid_item_a__ID></table>
									</div>
								</div>
								<div class="row">
									<div class="col-lg-6 col-sm-12">
										<div id=total__ID style='text-align: right;padding-top:6px'></div>
										GST Amount: <input type=text name=GST_Amount style="width:120px;margin-bottom:1px" >
										<br>
										Total Amount: <input type=text name=Total_Amount style="width:120px"  >
									</div>
								</div>
									</div>
								</div>
							</div>
							<section style='display:none'>
								<input type="text" name=Status />
							</section>
							<div>
								<div w='100|100' class=c_print>
									<button id=draft__ID type="button" class="btn btn-secondary">Save and Return Later</button>
									<button id=submit__ID type="button" class="btn btn-secondary">Submit</button>
									<!--<button id=pdf1__ID type="button" class="btn btn-secondary">PDF</button>-->
									<div style='display:none'><button id=trigger__ID></button></div>
								</div>
							</div>
						</form>
					</section>
					</div>
				</div>
			</div>
		</div>

    <script>
		function textAreaAdjust__ID(o) {
			//console.log(o)
			o.style.height = "1px";
			o.style.height = (25+o.scrollHeight)+"px";
		}
			//-------------------------------------
    	function F__ID(){
    		//-------------------------------------
            VmInclude:__COMPONENT__/f/form.01.js
			//-------------------------------------
		
			//-------------------------------------
			var item_a_list = function () {
					//----------------------------------
					//item a part
					m.item_a_fields = "Item_No,Description,Unit_Price,Quantity,GST,Amount,_Remove";
					//----------------------------------
					$('#item_a_add__ID').on('click', function () { m.item_a_add(); })
					//----------------------------------
					m.item_a_cell_render = function (records, I, field, td, set_value, source) {
						switch (field) {
							case "Amount":
								td.find('div:first').removeAttr('contenteditable');
								break;
							case "GST":
								var html = '<input type=checkbox />';
								$vm.render_checkbox_field(records[I], '__ID', td, html)
								td.find('input').on('change', function () {
									cal();
								})
								break;
						}
					}
					//----------------------------------
					m.item_a_after_change = function (records, I, field, td, set_value, source) {
						switch (field) {
							case "Unit_Price":
							case "Quantity":
								/*case "GST":*/
								cal();
								break;
						}
					}
					//----------------------------------
					m.item_a_after_remove = function () {
						cal();
					}
					$('#F__ID input[name=Delivery]').on('change', function () {
						cal();
					})
					//----------------------------------
					var cal = function () {
						var total = 0, subtotal = 0, gst = 0;
						for (var i = 0; i < m.item_a_records.length; i++) {
							var p = parseFloat(m.item_a_records[i].Unit_Price);
							var q = parseFloat(m.item_a_records[i].Quantity);
							if (m.item_a_records[i].Unit_Price == '') p = 0;
							if (m.item_a_records[i].Quantity == '') q = 0;
							var a = p * q;
							if (m.item_a_records[i].GST == '1') {
								gst += a * 0.1;
								a = a * 1.1;
							}
							m.item_a_records[i].Amount = a.toFixed(2);
							total += a;
						}
						$('#F__ID input[name=GST_Amount]').val(gst.toFixed(2));
						$('#F__ID input[name=Total_Amount]').val(total.toFixed(2));
						m.item_a_render();
					}
					//----------------------------------
				
				}
				//-----------------------------------
				var item_a_render = function () {
					//-------item a part
					m.item_a_records = []; if (m.input.record != undefined && m.input.record.Data.items != undefined) m.item_a_records = m.input.record.Data.items;
					m.item_a_render();
					//-------
				}
				ï»¿var load_received = function (query, options) {
						//load joined records parent.UID=child.I2
						var cmd = "find";
						var table = m.receive_table;
						var req = { cmd: cmd, table: table, query: query, options: options }
						$vm.request(req, function (res) {
							if (res.status == 'np') {
								$("#grid__ID td[data-id=_Received]").each(function (index) {
									$(this).html('');
								})
							}
							//attach child record
							if (res.result.length != undefined) {
								for (var k = 0; k < res.result.length; k++) {
									for (var j = 0; j < m.records.length; j++) {
										if (m.records[j].UID == res.result[k].I2) {
											m.records[j].sys_child_received = res.result[k];
											break;
										}
									}
								}
							}
							//rendering the column
							$("#grid__ID td[data-id=_Received]").each(function (index) {
								if (m.records[index].sys_child_received != undefined) {
									var tt = "";
									tt = "<i rid=" + index + " style='color:green;padding-left:10px;cursor:pointer' class='fas fa-check'></i>"
									//if(m.records[index].sys_child_received.Data.Action=='approve') tt="<i rid="+index+" style='color:green;padding-left:10px;cursor:pointer' class='fas fa-check'></i>"
									//if(m.records[index].sys_child_received.Data.Action=='denay')   tt="<i rid="+index+" style='color:red;padding-left:10px;cursor:pointer' class='fas fa-times'></i>"
									$(this).html(tt);
									$(this).find('i').on('click', function () {
										var k = parseInt($(this).attr('rid'));
										$vm.show_module(m.receive_module, { readonly: 1, record: m.records[k].sys_child_received, parent: m.records[k] });
									})
								}
							});
						})
					}

				//-----------------------------------

        

    </script>
    <style>
        #form_container__ID{
            max-width:800px;
        }
        VmInclude:__CURRENT_PATH__/wappsystem-form.css
    </style>
</div>
