<div id=D__ID>
    <section id=form_container__ID>
    	<div id=header__ID>
    		Form
    	</div>
    	<form id=F__ID>
    		<div class="container">
				<div class="row row__ID" id=row_participant__ID>
					<div class="col-sm-12 col-lg-12 input__ID">
						<span class=label__ID>Date</span><br>
						<input type=text class=form-control name=date id=date__ID required>
					</div>
                </div>
                <hr style="border-top: 1px solid #888;width: 100%;margin:10px 0">
                <br>
                <div class="row" id=items__ID>
                    <div class=col>
                        <u style='cursor:pointer;margin-bottom:3px;display:inline-block' id=item_a_add__ID><i class="fa fa-plus"></i> Add a study</u>
    				    <table id=grid_item_a__ID></table>
                    </div>
                </div>
                <br>
                <hr style="border-top: 1px solid #888;width: 100%;margin:10px 0">
				<div class="row">
					<div class=col>
						<button id=submit__ID type="submit" class="btn btn-secondary">Submit</button>
					</div>
				</div>
    		</div>
    	</form>
    </section>
    <script>
        function F__ID(){
            //-------------------------------------
            VmInclude:__COMPONENT__/f/form.01.js
            VmInclude:__COMPONENT__/f/form-item-a.01.js
            //-------------------------------------
			/*
            //-------------------------------------
            $('#submit1__ID').on('click',function(event){	m.draft=1;	$('#submit0__ID').trigger('click'); 	});
    		$('#submit2__ID').on('click',function(event){   m.draft=0;	$('#submit0__ID').trigger('click');		});
    		//--------------------------------------------------------
			*/
			m.before_submit=function(data,index){
                data.items=m.item_a_get_data();
                return true;
            }
            //--------------------------------------------------------
            var load=m.load;
            m.load=function(){
                load();
                /*
				$('#order__ID').hide(); 
                if(m.input.record!=undefined){
                    $('#uid__ID').val(m.input.record.UID);
                    $('#order__ID').show();
                }
                */
				//-------item a part
                m.item_a_records=[]; if(m.input.record!=undefined) m.item_a_records=m.input.record.Data.items;
                m.item_a_render();
                //-------
            }
            //--------------------------------------------------------
            m.after_insert=function(data,res){  after_submit(data); }
            m.after_update=function(data,res){  after_submit(data); }
            //--------------------------------------------------------
            var after_submit=function(data){
                $vm.refresh=1;
				var rid=undefined; if(m.input.record!=undefined) rid=m.input.record._id;
				if(rid!=undefined) window.history.go(-1);                       //modify
				else if(m.input.goback!=undefined) window.history.go(-1);       //from grid
				else $vm.alert('Your data has been successfully submitted');    //standalone
            }
            //--------------------------------------------------------



            //----------------------------------
            //item a part
            m.item_a_fields="Study_ID,Medicared,Type_of_Study,_Remove";
            //----------------------------------
            $('#item_a_add__ID').on('click',function(){ m.item_a_add(); })
            //----------------------------------
            m.item_a_cell_render=function(records,I,field,td,set_value,source){
                switch(field){
    				case "Medicared":
                        var html='<input type=checkbox />';
                        $vm.render_checkbox_field(records[I],'__ID',td,html)
                        break;
                }
            }
            //----------------------------------
			m.item_a_after_change=function(records,I,field,td,set_value,source){
                /*
				switch(field){
    				case "Unit_Price":
                    case "Quantity":
    				case "GST":
                        cal();
                        break;
                }
				*/
            }
            //----------------------------------
            m.item_a_after_remove=function(){
                //cal();
            }
            //----------------------------------
        }
    </script>
    <style>
        #form_container__ID{
            max-width:800px;
        }
        VmInclude:__COMPONENT__/f/form.01.css
        VmInclude:__COMPONENT__/f/form-item-a.01.css
    </style>
</div>
