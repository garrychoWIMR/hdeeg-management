<div id=D__ID>
	<!--third html start -->
	<div class="container mt-95 mb-3">
		<div class="row">
			<!-- form container start -->
			<div class="col-12 col-lg-12 col-md-12 col-sm-12 mx-auto formbox">
				<div class="row">
					<div class="col-12">
						<!-- form start -->
						<form id="F__ID">
							<h3>Research Studies</span></h3>
							<div>
								<div class="form-group ">
									<div class="questiongroup ">
										<fieldset class="subquestions">
											<div class="row">

												<div class="col-lg-6 col-sm-12">
													<div><label><span class="">Research Studies</span></label></div>
													<div class="input-group-sm ">
														<input type= "text" class="form-control" name=Research_study id=Research_study__ID >
													</div>
												</div>

												<div class="col-lg-6 col-sm-12">
													<div><label><span class="">Study Coordinators</span></label></div>
													<div class="input-group-sm ">
														<input type = "text" class="form-control" id=Coordinators__ID name=Coordinators placeholder="Search">
													</div>
												</div>
											
											</div>
										</fieldset>
									</div>
								</div>
								<div>
									<div class="form-group ">
										<div class="questiongroup ">
											<fieldset class="subquestions">
												<div class="row">
													<div class="col-lg-6 col-sm-12">
														<div><label><span class="">Principle Investigator</span></label></div>
														<div class="input-group-sm ">
															<input type="text" class="form-control" name=principle_inv id=principle_inv__ID placeholder="Search">
														</div>
													</div>
													<div class="col-lg-6 col-sm-12">
														<div><label><span class="">Status</span></label></div>
														<div class="input-group-sm ">
															<select class="form-control" name=Status id=Status__ID placeholder="Please Select...">
																<option>Planning</option>
																<option>Recruiting/Data Collecting</option>
																<option>Analysis</option>
																<option>Complete</option>
																</select>
														</div>
													</div>
												</div>
											</fieldset>
										</div>
									</div>
								<div class="form-group ">
									<div class="questiongroup ">
										<fieldset class="subquestions">
											<div class="row">
												<div class="col-lg-5 col-sm-12">
													<div class="input-group-sm ">
														<label><span class="">Ethics Approval Date</span></label>
														<input type="date" name=e_approval_date id=e_approval__ID >
													</div>
													</div>
													</div>
												</fieldset>
											</div>
										</div>
												<div class="form-group ">
													<div class="questiongroup ">
														<fieldset class="subquestions">
															<div class="row">
																<div class="col-lg-6 col-sm-12">
																	<div class="input-group-sm">
																		<label><span class="">Acquisition Start Date </span></label>
																		<input type="date" name=acq_start_date id=acq_start_date__ID>
																	</div>
																</div>
																<div class="col-lg-6 col-sm-12">
																	<div class="input-group-sm">
																		<label><span class="">Estimated End Date</span></label>
																		<input type="date" name=acq_end_date id=acq_end_date__ID>
																	</div>
																</div>
															</div>
														</fieldset>
													</div>
												</div>
												<div class="form-group ">
													<div class="questiongroup ">
														<fieldset class="subquestions">
															<div class="row">
																<div class="col-lg-12 col-sm-12">
																	<div class="input-group-sm ">
													<label><span class=""><u style='cursor:pointer;margin-bottom:3px;display:inline-block' id=add_comment__ID><i
																	class="fa fa-plus">Click here to add comment</u></i></span></label>
													<textarea class="form-control" id=Add_Comment__ID placeholder="enter new comments here.."></textarea>
																	</div>
																</div>
															</div>
														</fieldset>
													</div>
												</div>
										<div class="form-group ">
											<div class="questiongroup ">
												<fieldset class="subquestions">
													<div class="row">
														<div class="col-lg-12 col-sm-12">
															<div><label><span class="">Notes</span></label></div>
															<div class="input-group-sm">
																<textarea style='font-size:12px' class="form-control" name=Comments id=Comments__ID placeholder="Anything else?" readonly></textarea>
															</div>
														</div>
													</div>
												</fieldset>
											</div>
										</div>
										<br>
								<center> Should be free typed and then added into the field?</center><br>
								<center><p><b>Things to consider about adding</b></p>
								<li>Governance</li>
								<li>Ethics Approval Letter Upload</li>
								<li>Tracking Amendments</li>
								<li>Staffing for studies </li>
								</center>
								<button type="submit" id="submit__ID" class="btn btn-primary btn-lg">Submit</button>
								<button id=delete__ID type="button" class="btn btn-primary btn-lg">Delete</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
    <script>
		function textAreaAdjust__ID(o) {
			//console.log(o)
			o.style.height = "1px";
			o.style.height = (25+o.scrollHeight)+"px";
		}
			//-------------------------------------
    	function F__ID(){
    		//-------------------------------------
            VmInclude:__COMPONENT__/f/form.01.js
			//-------------------------------------

			$('#add_comment__ID').on('click', function () {
				var now_time = new Date();
				now_time = now_time.toString().split(" ");
				now_time = now_time[4];
				var now_date = $vm.date_to_string_dmy(new Date());
				var new_comments = $('#Add_Comment__ID').val();
				if (new_comments != "") {
					var old_comments = $('#F__ID textarea[name=Comments]').val()
					if ($('#F__ID textarea[name=Comments]').val() == undefined) old_comments = "";
					var comments = now_time + ' ' + now_date + " - " + $vm.user_name + "\n" + new_comments + "\n\n" + old_comments
					$('#F__ID textarea[name=Comments]').val(comments)
					$('#Add_Comment__ID').val("");
				}
				else $vm.alert("Please enter a comment")
			})
			//-------------------------------------
				var autocomplete_req = { cmd: "find", field: '.Data.s_name', table: 'people-setup', query: { "Data.position": "Researcher" }, options: {}, skip: 0, limit: 10 }
				var autocomplete_callback = function (item) {
					$('input[name=Coordinators]').val(item.label);
				}
				var autocomplete_list = function (records) {
					var items = [];
					for (var i = 0; i < records.length; i++) {
						var obj = {};
						obj.label = records[i].Data["s_name"];
						items.push(obj);
					}
					return items;
				}
				var wait = function () {
					$vm.autocomplete($('#F__ID input[name=Coordinators]'), autocomplete_req, autocomplete_list, autocomplete_callback);
				}
				var I1 = 0; var loop = setInterval(function () {
					if ($vm['jquery-ui-min-js'] != undefined) { clearInterval(loop); wait(); }
					I1++; if (I1 > 50) { clearInterval(loop); alert("jquery-ui.min.js is not installed."); }
				}, 100);
			//-------------------------------------	
				var autocomplete_req2 = { cmd: "find", field: '.Data.s_name', table: 'people-setup', query: { "Data.position": "Researcher" }, options: {}, skip: 0, limit: 10 }
				var autocomplete_callback2 = function (item) {
					$('input[name=principle_inv]').val(item.label);
				}
				var autocomplete_list2 = function (records) {
					var items = [];
					for (var i = 0; i < records.length; i++) {
						var obj = {};
						obj.label = records[i].Data["s_name"];
						items.push(obj);
					}
					return items;
				}
				var wait2 = function () {
					$vm.autocomplete($('#F__ID input[name=principle_inv]'), autocomplete_req2, autocomplete_list2, autocomplete_callback2);
				}
				var I2 = 0; var loop_2 = setInterval(function () {
					if ($vm['jquery-ui-min-js'] != undefined) { clearInterval(loop_2); wait2(); }
					I2++; if (I2 > 50) { clearInterval(loop_2); alert("jquery-ui.min.js is not installed."); }
				}, 100);
			//-------------------------------------
				var autocomplete_req3 = { cmd: "find", field: '.Data.study1', table: 'people-setup', query: {}, options: {}, skip: 0, limit: 10 }
				var autocomplete_callback3 = function (item) {
					$('input[name=Staff]').val(item.label);
				}
				var autocomplete_list3 = function (records) {
					var items = [];
					for (var i = 0; i < records.length; i++) {
						var obj = {};
						obj.label = records[i].Data["study_1"];
						items.push(obj);
					}
					return items;
				}
				var wait3 = function () {
					$vm.autocomplete($('#F__ID input[name=Staff]'), autocomplete_req3, autocomplete_list3, autocomplete_callback3);
				}
				var I3 = 0; var loop_3 = setInterval(function () {
					if ($vm['jquery-ui-min-js'] != undefined) { clearInterval(loop_3); wait3(); }
					I3++; if (I3 > 50) { clearInterval(loop_3); alert("jquery-ui.min.js is not installed."); }
				}, 100);
			//-------------------------------------
		}
		//-------------------------------

    </script>
    <style>
        #form_container__ID{
            max-width:800px;
        }
        VmInclude:__CURRENT_PATH__/wappsystem-form.css
    </style>
</div>
