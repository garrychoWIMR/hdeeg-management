<!--

to do list for this form: 
- Find a way to import information into Spardac (i.e Sets up the tracking sheet)
- Timestamps
- Determine whether the comments sections are necessary? 
- Fix IDs and names for each field 
-->


<div id=D__ID>
	<!--third html start -->
	<div class="container mt-95 mb-3">
		<div class="row">
			<!-- form container start -->
			<div class="col-12 col-lg-12 col-md-12 col-sm-12 mx-auto formbox">
				<div class="row">
					<div class="col-12">
						<!-- form start -->
						<form id="F__ID">
							<h3>Tracking Study Analysis</span></h3>
								<div>
									<div class="form-group ">
										<div class="questiongroup ">
											<fieldset class="subquestions">
												<div><label><span class=""><h4><u>Subject Background Information:</u></h4></span></label></div>
												<div class="row">	
														<div class="col-lg-3 col-sm-12">
															<div><label><span class="">Subject ID</span></label></div>
															<div class="input-group-sm ">
													  <input type="text" id=subjectid__id name=subjectid>
														</div>
													</div>
													<div class="col-lg-3 col-sm-12">
															<div><label><span class="">Research Study</span></label></div>
															<input type="text" id=Research_Study__ID name=Research_Study readonly>
															<div class="input-group-sm ">
															</div>
													</div>
														<div class="col-lg-3 col-sm-12">
															<div><label><span class="">Visit</span></label></div>
															 <input type="text" id=visit__ID name=visit>
															<div class="input-group-sm ">
														</div>
													</div>
														<div class="col-lg-3 col-sm-12">
															<div><label><span class="">Type of Study</span></label></div>
															<div class="input-group-sm ">
															<select class="form-control" name=study_type id=study_type__ID placeholder="Please Select...">
																<option>PSG</option>
																<option>KDT</option>
																<option>MWT</option>
																<option>Nap</option>
																</select>
														</div>
														</div>
													</div>
												</div>
											</fieldset>
										</div>
									</div>
										<div class="form-group ">
											<div class="questiongroup ">
												<fieldset class="subquestions">
													<div class="row">
														<div class="col-lg-3 col-sm-12">
															<div><label><span class="">Acquisition Date</span></label></div>
															<div class="input-group-sm ">
																<input type="date" id=Acquisition_date__ID name=Acquisition_date readonly>
															</div>
														</div>
														<div class="col-lg-9 col-sm-12">
															<div><label><span class="">Comments about the Acquisition</span></label></div>
															<textarea style='font-size:12px' class="form-control" name=acq_comments id=acq_comments__ID placeholder="Make it more 'ticket' like?"></textarea>
															<div class="input-group-sm ">
															</div>
														</div>
													</div>
												</fieldset>
											</div>
										</div>
										<div>
										<div class="form-group ">
											<div class="questiongroup ">
												<fieldset class="subquestions">
													<div><label><span class=""><h4><u>Netstation Pre-Processing:</u></h4></span></label></div>
													<div class="row">
														<div class="col-lg-3 col-sm-12">
															<div><label><span class="">Done?</span></label></div>
															<div class="input-group-sm ">
																<input type="checkbox" id=ns_preproc__ID name=ns_preproc value=yes readonly>
																<input hidden name=ns_preproc_by id= />
																<input class=timestamp id=ns_preproc_time__ID name=ns_preproc_time readonly>
															</div>
														</div>
														<div class="col-lg-9 col-sm-12">
															<div><label><span class="">Comments about the Acquisition</span></label></div>
															<textarea style='font-size:12px' class="form-control" name=ns_preproc_comments id=ns_preproc_comments__ID
																placeholder="Write Comments here about the data"></textarea>
															<div class="input-group-sm ">
															</div>
														</div>
													</div>
												</fieldset>
											</div>
										</div>
											<div class="form-group ">
												<div class="questiongroup ">
													<fieldset class="subquestions">
														<div><label><span class=""><h4><u>PRANA Processing:</u></h4></span></label></div>
														<div class="row">
															<div class="col-lg-3 col-sm-12">
																<div><label><span class="">Done?</span></label></div>
																<div class="input-group-sm ">
																	<input type="checkbox" id=pranaproc__ID name=pranaproc value=yes readonly>
																	<input class=timestamp id=pranaproc_time__ID name=pranaproc_time readonly>
																	<input hidden name=pra_preproc_by>
																</div>
															</div>
															<div class="col-lg-9 col-sm-12">
																<div><label><span class="">Comments about the Acquisition</span></label></div>
																<textarea style='font-size:12px' class="form-control" name=pr_preproc_comments id=pr_preproc_comments__ID
																	placeholder="Write Comments here about the data"></textarea>
																<div class="input-group-sm ">
																</div>
															</div>
														</div>
													</fieldset>
												</div>
											</div>
											<div class="form-group ">
												<div class="questiongroup ">
													<fieldset class="subquestions">
														<div><label><span class=""><h4><u>UWM PreProcessing:</u></h4></span></label></div>
														<div class="row">
															<div class="col-lg-3 col-sm-12">
																<div><label><span class="">Done?</span></label></div>
																<div class="input-group-sm ">
																	<input type="checkbox" id=uwm_proc__ID name=uwm_proc value=yes readonly>
																	<input class=timestamp  id=uwm_proc_time__ID name=uwm_proc_time readonly>
																	<input hidden name=uwm_preproc_by>
																</div>
															</div>
															<div class="col-lg-3 col-sm-12">
																<div><label><span class="">Version?</span></label></div>
																<div class="input-group-sm ">
																	<select class="form-control" name=uwm_ver id=uwm_ver__ID>
																		<option  disabled selected>Select UWM Version</option>
																		<option>Version 1</option>
																		<option>Version 2</option>
																		<option>BIDS Processor</option>
																	</select>
																</div>
															</div>
															<div class="col-lg-6 col-sm-12">
																<div><label><span class="">Comments about the Acquisition</span></label></div>
																<textarea style='font-size:12px' class="form-control" name=uwm_preproc_comments id=uwm_preproc_comments__ID
																	placeholder="Write Comments here about the data"></textarea>
																<div class="input-group-sm ">
																</div>
															</div>
														</div>
													</fieldset>
												</div>
											</div>

								<!--Created everything above-->
							
								<div class="form-group ">
									<div class="questiongroup ">
										<fieldset class="subquestions">
											<div class="row">
												<div class="col-lg-12 col-sm-12">
													<div><label><span class="">Notes</span></label></div>
													<div class="input-group-sm">
														<textarea style='font-size:12px' class="form-control" name=Notes id=Notes__ID placeholder="Anything else?"></textarea>
													</div>
												</div>
											</div>
										</fieldset>
									</div>
								</div>
								<br>
								<button type="submit" id="submit__ID" class="btn btn-primary btn-lg">Submit</button>
								<button id=delete__ID type="button" class="btn btn-primary btn-lg">Delete</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
    <script>
		function textAreaAdjust__ID(o) {
			//console.log(o)
			o.style.height = "1px";
			o.style.height = (25+o.scrollHeight)+"px";
		}
			//-------------------------------------
    	function F__ID(){
    		//-------------------------------------
            VmInclude:__COMPONENT__/f/form.01.js
			//-------------------------------------

				var autocomplete_req = { cmd: "find", field: '.Data.Research_study', table: 'researchstudies-setup', options: {}, skip: 0, limit: 10 }
				var autocomplete_callback = function (item) {
					$('input[name=Research_Study]').val(item.label);
				}
				var autocomplete_list = function (records) {
					var items = [];
					for (var i = 0; i < records.length; i++) {
						var obj = {};
						obj.label = records[i].Data["Research_study"];
						items.push(obj);
					}
					return items; s
				}
				var wait = function () {
					$vm.autocomplete($('#F__ID input[name=Research_Study]'), autocomplete_req, autocomplete_list, autocomplete_callback);
				}
				var I = 0; var loop = setInterval(function () {
					if ($vm['jquery-ui-min-js'] != undefined) { clearInterval(loop); wait(); }
					I++; if (I > 50) { clearInterval(loop); alert("jquery-ui.min.js is not installed."); }
				}, 100);
		//-------------------------------
		

		//-------------------------------
			
				$('#ns_preproc__ID').on('click', function () {
					var now_time = new Date();
					now_time = now_time.toString().split(" ");
					now_time = now_time[4];
					var now_date = $vm.date_to_string_dmy(new Date());
					var timestamp = ($('#F__ID input[name=ns_preproc_time]')).val();
					var timestamp = now_date + ' ' + now_time; 
					var user = ($('#F__ID input[name=ns_preproc_by]')).val($vm.user_name); 
					($('#F__ID input[name=ns_preproc_time]')).val(timestamp);
				})

				
		//-------------------------------
				
				$('#pranaproc__ID').on('click', function () {
					var now_time = new Date();
					now_time = now_time.toString().split(" ");
					now_time = now_time[4];
					var now_date = $vm.date_to_string_dmy(new Date());
					var timestamp = ($('#F__ID input[name=pranaproc_time]')).val();
					var timestamp = now_date + ' ' + now_time ;
					var user =($('#F__ID input[name=pra_preproc_by]')).val($vm.user_name);
					($('#F__ID input[name=pranaproc_time]')).val(timestamp);
				})
			
		//-------------------------------
				
				$('#uwm_proc__ID').on('click', function () {
					var now_time = new Date();
					now_time = now_time.toString().split(" ");
					now_time = now_time[4];
					var now_date = $vm.date_to_string_dmy(new Date());
					var timestamp = ($('#F__ID input[name=uwm_proc_time]')).val();
					var timestamp = now_date + ' ' + now_time ;
					($('#F__ID input[name=uwm_proc_time]')).val(timestamp);
					var user = ($('#F__ID input[name=uwm_preproc_by]')).val($vm.user_name);
				})
			//-----------------------------
				/*function myFunction() {
					// Get the checkbox
					var pra_proc_cb = document.getElementById(pranaproc__ID);
					alert(document.getElementById(pranaproc__ID));
					if (pra_proc_cb !== "Yes") {
						($('#F__ID input[name=pranaproc]')).val("No");
					}
				}
					else {
						($('#F__ID input[name=ns_preproc]')).val(' ');
					}*/

			//-----------------------------


			}


    </script>
    <style>
        #form_container__ID{
            max-width:800px;
        }
        VmInclude:__CURRENT_PATH__/wappsystem-form.css
				.timestamp{
					border:none;
					font-size:10px;
					background-color:none;
				}
    </style>
</div>
